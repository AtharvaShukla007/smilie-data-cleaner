{
  "query": "CREATE TABLE `api_keys` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`name` varchar(128) NOT NULL,\n\t`keyHash` varchar(255) NOT NULL,\n\t`keyPrefix` varchar(16) NOT NULL,\n\t`permissions` json,\n\t`lastUsedAt` timestamp,\n\t`expiresAt` timestamp,\n\t`isActive` boolean DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `api_keys_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `audit_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int,\n\t`batchId` int,\n\t`recordId` int,\n\t`action` varchar(64) NOT NULL,\n\t`entityType` varchar(64) NOT NULL,\n\t`entityId` int,\n\t`previousValue` json,\n\t`newValue` json,\n\t`metadata` json,\n\t`ipAddress` varchar(64),\n\t`userAgent` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `audit_logs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `data_records` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`batchId` int NOT NULL,\n\t`rowIndex` int NOT NULL,\n\t`originalData` json,\n\t`cleanedData` json,\n\t`name` varchar(255),\n\t`phone` varchar(64),\n\t`email` varchar(320),\n\t`addressLine1` text,\n\t`addressLine2` text,\n\t`city` varchar(128),\n\t`state` varchar(128),\n\t`postalCode` varchar(32),\n\t`country` varchar(128),\n\t`cleanedName` varchar(255),\n\t`cleanedPhone` varchar(64),\n\t`cleanedEmail` varchar(320),\n\t`cleanedAddressLine1` text,\n\t`cleanedAddressLine2` text,\n\t`cleanedCity` varchar(128),\n\t`cleanedState` varchar(128),\n\t`cleanedPostalCode` varchar(32),\n\t`cleanedCountry` varchar(128),\n\t`status` enum('pending','cleaned','flagged','approved','rejected') NOT NULL DEFAULT 'pending',\n\t`qualityScore` int DEFAULT 100,\n\t`needsReview` boolean DEFAULT false,\n\t`reviewedBy` int,\n\t`reviewedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `data_records_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `processing_jobs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`batchId` int NOT NULL,\n\t`userId` int NOT NULL,\n\t`jobType` enum('clean','validate','export','llm_enhance') NOT NULL,\n\t`status` enum('queued','processing','completed','failed') NOT NULL DEFAULT 'queued',\n\t`progress` int DEFAULT 0,\n\t`totalItems` int DEFAULT 0,\n\t`processedItems` int DEFAULT 0,\n\t`errorMessage` text,\n\t`result` json,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `processing_jobs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `upload_batches` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`fileName` varchar(255) NOT NULL,\n\t`originalFileUrl` text,\n\t`fileSize` bigint,\n\t`totalRecords` int DEFAULT 0,\n\t`cleanedRecords` int DEFAULT 0,\n\t`errorRecords` int DEFAULT 0,\n\t`warningRecords` int DEFAULT 0,\n\t`status` enum('pending','processing','completed','failed') NOT NULL DEFAULT 'pending',\n\t`region` varchar(64) DEFAULT 'singapore',\n\t`processedFileUrl` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\t`completedAt` timestamp,\n\tCONSTRAINT `upload_batches_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `validation_issues` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`recordId` int NOT NULL,\n\t`batchId` int NOT NULL,\n\t`field` varchar(64) NOT NULL,\n\t`severity` enum('error','warning','info') NOT NULL DEFAULT 'warning',\n\t`issueType` varchar(64) NOT NULL,\n\t`message` text NOT NULL,\n\t`originalValue` text,\n\t`suggestedValue` text,\n\t`isResolved` boolean DEFAULT false,\n\t`resolvedBy` int,\n\t`resolvedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `validation_issues_id` PRIMARY KEY(`id`)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2VddhkrjSQeeUWQ.root --database ZfcsmVnk8Fk6t9ug7bKYaY --execute CREATE TABLE `api_keys` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`name` varchar(128) NOT NULL,\n\t`keyHash` varchar(255) NOT NULL,\n\t`keyPrefix` varchar(16) NOT NULL,\n\t`permissions` json,\n\t`lastUsedAt` timestamp,\n\t`expiresAt` timestamp,\n\t`isActive` boolean DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `api_keys_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `audit_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int,\n\t`batchId` int,\n\t`recordId` int,\n\t`action` varchar(64) NOT NULL,\n\t`entityType` varchar(64) NOT NULL,\n\t`entityId` int,\n\t`previousValue` json,\n\t`newValue` json,\n\t`metadata` json,\n\t`ipAddress` varchar(64),\n\t`userAgent` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `audit_logs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `data_records` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`batchId` int NOT NULL,\n\t`rowIndex` int NOT NULL,\n\t`originalData` json,\n\t`cleanedData` json,\n\t`name` varchar(255),\n\t`phone` varchar(64),\n\t`email` varchar(320),\n\t`addressLine1` text,\n\t`addressLine2` text,\n\t`city` varchar(128),\n\t`state` varchar(128),\n\t`postalCode` varchar(32),\n\t`country` varchar(128),\n\t`cleanedName` varchar(255),\n\t`cleanedPhone` varchar(64),\n\t`cleanedEmail` varchar(320),\n\t`cleanedAddressLine1` text,\n\t`cleanedAddressLine2` text,\n\t`cleanedCity` varchar(128),\n\t`cleanedState` varchar(128),\n\t`cleanedPostalCode` varchar(32),\n\t`cleanedCountry` varchar(128),\n\t`status` enum('pending','cleaned','flagged','approved','rejected') NOT NULL DEFAULT 'pending',\n\t`qualityScore` int DEFAULT 100,\n\t`needsReview` boolean DEFAULT false,\n\t`reviewedBy` int,\n\t`reviewedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `data_records_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `processing_jobs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`batchId` int NOT NULL,\n\t`userId` int NOT NULL,\n\t`jobType` enum('clean','validate','export','llm_enhance') NOT NULL,\n\t`status` enum('queued','processing','completed','failed') NOT NULL DEFAULT 'queued',\n\t`progress` int DEFAULT 0,\n\t`totalItems` int DEFAULT 0,\n\t`processedItems` int DEFAULT 0,\n\t`errorMessage` text,\n\t`result` json,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `processing_jobs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `upload_batches` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`fileName` varchar(255) NOT NULL,\n\t`originalFileUrl` text,\n\t`fileSize` bigint,\n\t`totalRecords` int DEFAULT 0,\n\t`cleanedRecords` int DEFAULT 0,\n\t`errorRecords` int DEFAULT 0,\n\t`warningRecords` int DEFAULT 0,\n\t`status` enum('pending','processing','completed','failed') NOT NULL DEFAULT 'pending',\n\t`region` varchar(64) DEFAULT 'singapore',\n\t`processedFileUrl` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\t`completedAt` timestamp,\n\tCONSTRAINT `upload_batches_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `validation_issues` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`recordId` int NOT NULL,\n\t`batchId` int NOT NULL,\n\t`field` varchar(64) NOT NULL,\n\t`severity` enum('error','warning','info') NOT NULL DEFAULT 'warning',\n\t`issueType` varchar(64) NOT NULL,\n\t`message` text NOT NULL,\n\t`originalValue` text,\n\t`suggestedValue` text,\n\t`isResolved` boolean DEFAULT false,\n\t`resolvedBy` int,\n\t`resolvedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `validation_issues_id` PRIMARY KEY(`id`)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3819
}